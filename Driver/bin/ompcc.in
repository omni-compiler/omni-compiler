#!/bin/sh

# $TSUKUBA_Release: Omni OpenMP Compiler 3 $
# $TSUKUBA_Copyright:
#  PLEASE DESCRIBE LICENSE AGREEMENT HERE
#  $

BINDIR=`dirname $0`

USE_ACC=''
args=''
for i in "$@"; do
    case "${i}" in
        -tmp)
            args="${args} --Wn${i}";;
	-acc)
	    if test @ENABLE_ACC@ -eq 1; then
		USE_ACC="1"
	    else
		echo "warning: -acc option is unavailable, rebuild the compiler with ./configure --enable-openacc"
	    fi;;
        *)
            args="${args} ${i}";;
    esac
done

set -- ${args}

if [ -z "${USE_ACC}" ]; then
    ${BINDIR}/omdriver --xc -Topenmp "$@"
else
    ${BINDIR}/omdriver --xc -Tacc "$@"
fi

exit $?

